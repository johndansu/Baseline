<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Baseline Dashboard</title>
  <link rel="stylesheet" href="/assets/dashboard.css">
</head>
<body>
  <main class="shell">
    <header class="hero">
      <div class="hero-title">
        <img src="/assets/baseline-logo.png" alt="Baseline logo">
        <div>
          <p class="kicker">Baseline API</p>
          <h1>Operational Dashboard</h1>
        </div>
      </div>
      <div class="status-strip">
        <span id="healthPill" class="pill pending">Health: pending</span>
        <span id="readyPill" class="pill pending">Ready: pending</span>
        <span id="authPill" class="pill pending">Auth: unknown</span>
        <span id="lastUpdated" class="pill">Last updated: never</span>
      </div>
      <div class="status-details">
        <p id="readyDetail" class="muted">Readiness checks: pending</p>
        <p id="authDetail" class="muted">Auth mode: unknown</p>
      </div>
    </header>

    <section class="auth-card">
      <h2>Access</h2>
      <p class="muted">
        Use an API key for direct access, or create a dashboard session if sessions are enabled.
      </p>
      <div class="auth-grid">
        <input id="apiKeyInput" type="password" class="input" placeholder="API key (stored in this browser)">
        <button id="saveKeyBtn" class="btn primary" type="button">Save Key</button>
        <button id="clearKeyBtn" class="btn ghost" type="button">Clear Key</button>
        <button id="startSessionBtn" class="btn accent" type="button">Start Session</button>
        <button id="endSessionBtn" class="btn ghost" type="button">End Session</button>
      </div>
      <p id="sessionInfo" class="muted">Session: unknown</p>
      <p id="errorText" class="error"></p>
    </section>

    <section class="metrics-grid">
      <article class="metric"><span>Projects</span><strong id="metricProjects">-</strong></article>
      <article class="metric"><span>Scans</span><strong id="metricScans">-</strong></article>
      <article class="metric"><span>Failing Scans</span><strong id="metricFailing">-</strong></article>
      <article class="metric"><span>Blocking Violations</span><strong id="metricBlocking">-</strong></article>
    </section>

    <section class="panel-grid">
      <article class="panel">
        <h2>Recent Scans</h2>
        <table>
          <thead>
            <tr>
              <th>ID</th>
              <th>Status</th>
              <th>Violations</th>
              <th>Created</th>
            </tr>
          </thead>
          <tbody id="scansBody">
            <tr><td colspan="4">Waiting for data...</td></tr>
          </tbody>
        </table>
      </article>

      <article class="panel">
        <h2>Top Violations</h2>
        <ul id="violationsList" class="list">
          <li>No data.</li>
        </ul>
      </article>

      <article class="panel">
        <h2>Recent Events</h2>
        <table>
          <thead>
            <tr>
              <th>Event</th>
              <th>Created</th>
            </tr>
          </thead>
          <tbody id="eventsBody">
            <tr><td colspan="2">Waiting for data...</td></tr>
          </tbody>
        </table>
      </article>

      <article class="panel">
        <h2>Projects</h2>
        <table>
          <thead>
            <tr>
              <th>Name</th>
              <th>Branch</th>
              <th>Policy Set</th>
            </tr>
          </thead>
          <tbody id="projectsBody">
            <tr><td colspan="3">Waiting for data...</td></tr>
          </tbody>
        </table>
      </article>
    </section>

    <section class="panel project-form">
      <h2>Create Project</h2>
      <p class="muted">Requires operator/admin role.</p>
      <form id="projectForm">
        <div class="form-grid">
          <input id="projectName" type="text" class="input" placeholder="Project name" required>
          <input id="projectBranch" type="text" class="input" placeholder="Default branch (main)">
          <input id="projectPolicySet" type="text" class="input" placeholder="Policy set (baseline:prod)">
          <button class="btn primary" type="submit">Create</button>
        </div>
      </form>
    </section>
  </main>

  <script src="/assets/dashboard.js"></script>
</body>
</html>
